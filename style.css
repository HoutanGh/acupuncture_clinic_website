/* =====================================================================
   0.  Global tweaks that Tailwind pre-flight doesn't cover
===================================================================== */

/* Global sanity + reset (complements Tailwind Preflight) */
html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }
body { margin: 0; }
img, video, canvas { max-width: 100%; height: auto; display: block; }
svg { max-width: 100%; height: auto; }

/* Optional temporary guard while auditing overflow (keep disabled by default) */
/* html, body { overflow-x: clip; } */

/* Global font family override - exclude Font Awesome icons */
body, 
body *:not([class*="fa-"]):not(.fa):not(.fas):not(.far):not(.fal):not(.fab) {
  font-family: 'Aptos', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif !important;
}

/* Ensure Font Awesome icons use their proper font */
.fa, .fas, .far, .fal, .fab, [class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 6 Pro", "Font Awesome 6 Brands" !important;
}

/* Generic card-like sections */
section {
  /* Anchor offset handled via Tailwind scroll-pt utilities */
  position: relative;
  /* Inter-section spacing is controlled in HTML via Tailwind mt-* */
  border: 2px solid transparent;
  transition: all 0.3s;
  /* Force square corners for all sections */
  border-radius: 0 !important;
}

/* Remove any outline highlight on hover/focus for sections */
section:hover,
section:focus,
section:focus-visible,
section:focus-within {
  outline: none !important;
}


/* Fancy underline for nav links */
.nav-link {
  position: relative;
  padding-bottom: 0.125rem;   /* 2px */
}
.nav-link::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: 0;
  width: 0;
  height: 2px;
  background: #c97a53;
  transform: translateX(-50%);
  transition: width 0.3s ease-out;
}
.nav-link:hover::after,
.nav-link:focus::after { width: 100%; }

/* Sage palette now provided via Tailwind config (see index.html) */
/* Also provide CSS fallbacks to ensure backgrounds always render */
.bg-sage-50  { background-color: #f7f9f5; }

/* Section background fallbacks (in case Tailwind classes are unavailable) */
#about-acupuncture,
#conditions,
#prices { background-color: #f7f9f5; }

/* Intentionally left for Tailwind-first approach. Any top bar tweaks now live in index.html classes. */

/* =====================================================================
   1.  Enhanced Form Styling - Minimal & Cool
===================================================================== */

/* Glass morphism effect for the form container */
.glass-morphism {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* Form input styling with underline effect */
.form-input {
  outline: none;
  position: relative;
}

.form-input::placeholder {
  transition: all 0.3s ease;
}

.form-input:focus::placeholder {
  opacity: 0.6;
  transform: translateY(-2px);
}

/* Tailwind controls hover/focus border colors for inputs */

/* Form group animation */
.form-group {
  position: relative;
}

/* Hover border handled via Tailwind utilities */

/* Submit button enhancements */
.submit-btn {
  position: relative;
  overflow: hidden;
  letter-spacing: 0.5px;
}

.submit-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.6s ease;
}

.submit-btn:hover::before {
  left: 100%;
}

.submit-btn:hover .submit-icon {
  transform: translateX(2px);
}

/* Loading state for submit button */
.submit-btn.loading {
  cursor: not-allowed;
  opacity: 0.7;
}

.submit-btn.loading .submit-text {
  opacity: 0;
}

.submit-btn.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid transparent;
  border-top: 2px solid #ffffff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.form-input.success {
  border-bottom-color: #10b981 !important;
}

/* Smooth transitions for all form elements */
.form-input,
.submit-btn {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* =====================================================================
   2.  Welcome Section Background with Jay Castor Image
===================================================================== */

#home {
  background-image: linear-gradient(rgba(247, 249, 245, 0.85), rgba(255, 255, 255, 0.75), rgba(236, 243, 226, 0.85)), url('images/jay-castor-7AcMUSYRZpU-unsplash.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

/* Ensure content is properly layered */
#home > .relative {
  position: relative;
  z-index: 2;
}

/* Add subtle overlay for better text contrast */
#home::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.1);
  z-index: 1;
  border-radius: inherit;
}


/* =====================================================================
   2a. Welcome Section — Mobile refinements
   - Tighter spacing, smaller type, smoother background on phones
===================================================================== */

@media (max-width: 639px) {
  /* Reduce heavy vertical rhythm and side padding */
  #home > .relative {
    padding: 1.5rem 1rem !important; /* was px-6 py-16 */
  }

  /* Avoid fixed backgrounds on mobile for smoother scrolling */
  #home { background-attachment: scroll; }

  /* Headline scaling for small screens */
  #home h1 {
    font-size: clamp(1.75rem, 6vw, 2rem);
    line-height: 1.2;
  }
  /* Secondary lines in the headline stack a touch smaller */
  #home h1 .block {
    font-size: clamp(1.25rem, 5.2vw, 1.5rem);
    line-height: 1.25;
  }

  /* Intro paragraph readability */
  #home p {
    font-size: 1rem; /* ~text-base */
    line-height: 1.6;
    margin-top: 0.25rem;
  }

  /* The contact column has px-16 on mobile — soften it */
  #home .relative > div:last-child {
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }

  /* Form card breathing room */
  #home #contact {
    padding: 1rem !important; /* was p-8 */
    border-radius: 0.875rem; /* ~rounded-xl but a bit tighter */
  }

  /* Button size harmony */
  #home .submit-btn {
    height: 3.25rem !important; /* a little shorter */
    font-size: 0.95rem;
  }

  /* Tighten vertical rhythm for space-y utilities inside #home */
  #home .space-y-8 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem !important; }
  #home .space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.75rem !important; }

  /* Put first/last name on one row on mobile */
  #home #contact .grid.grid-cols-1 {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 0.75rem !important; /* ~gap-3 for tighter fit */
  }

  /* Ensure overlay covers right up to the border on mobile */
  #home::before { inset: -2px; }
}


/* =====================================================================
   3.  Timeline tweaks (About Acupuncture → Tradition)
   - Horizontal on mobile, compact spacing
   - Tooltips open on tap (mobile) or hover (desktop)
===================================================================== */

/* Show tooltip when a timeline item is programmatically opened */
.timeline-item.open .timeline-tooltip { 
  opacity: 1 !important; 
  pointer-events: auto !important; 
}

/* Small nudge for reduced spacing under the time label on desktop */
@media (min-width: 768px) {
  .timeline-item p { margin-top: 0.25rem !important; }
}



/* =====================================================================
   4.  Treated Conditions (mobile overlay)
   - Hide cards on mobile; show diagram-only
   - Show translucent overlay on point hover/tap
===================================================================== */

/* Hide the list of condition cards on smaller screens */
@media (max-width: 1023px) {
  .conditions-list { display: none !important; }
}


/* =====================================================================
   5.  Prices section (mobile horizontal cards)
   - Make cards adjacent horizontally with smaller footprint
===================================================================== */

@media (max-width: 639px) {
  #prices .prices-cards {
    display: flex !important;
    gap: 0.5rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    padding-bottom: 0.25rem;
  }
  #prices .prices-cards > div {
    flex: 0 0 220px; /* slightly smaller cards to fit */
    padding: 0.875rem !important;
    border-radius: 0.75rem;
    scroll-snap-align: start;
    transform: none !important; /* disable hover scale on mobile */
  }
  #prices .prices-cards > div:hover {
    transform: none !important;
  }
  /* Slightly smaller icon circle */
  #prices .prices-cards > div .w-12.h-12 {
    width: 2.5rem; /* 40px */
    height: 2.5rem;
  }
}

/* Overlay container injected in the figure */
.condition-overlay {
  position: absolute;
  width: 300px;
  max-width: calc(100% - 24px);
  z-index: 30;
  background: rgba(255, 255, 255, 0.82); /* more translucent */
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 0.75rem; /* ~rounded-xl */
  box-shadow: 0 10px 25px rgba(0,0,0,0.12);
  padding: 0.75rem 0.875rem;
  opacity: 0;
  transform: translate(-50%, -8px);
  transition: opacity 100ms ease, transform 100ms ease;
  pointer-events: none; /* allow clicks to pass through */
}

.condition-overlay.visible {
  opacity: 1;
  transform: translate(-50%, 0);
  /* keep pointer-events none so points can be clicked through */
}

/* =====================================================================
   6.  Utilities
   - Hide scrollbars for horizontal carousels on mobile
===================================================================== */

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

.condition-overlay .title {
  font-weight: 600;
  color: #6b7f57; /* text-sage-700 */
  margin-bottom: 0.25rem;
}

.condition-overlay .desc {
  font-size: 0.9rem;
  line-height: 1.4;
  color: #374151; /* gray-700 */
}

/* =====================================================================
   6a. Conditions active highlight (points + cards)
===================================================================== */

.condition-point {
  transition: transform 160ms ease, box-shadow 160ms ease, background-color 160ms ease;
}

.condition-point.active {
  transform: translate(-50%, -50%) scale(1.15);
  background-color: rgba(20, 184, 166, 0.7); /* teal-500 stronger */
  box-shadow: 0 0 0 6px rgba(201, 122, 83, 0.28), 0 0 0 12px rgba(201, 122, 83, 0.14), 0 8px 18px rgba(0,0,0,0.25);
}

.condition-info.active {
  border-left-color: rgba(234, 88, 12, 0.6) !important; /* orange-500/60 */
  background-color: rgba(247, 249, 245, 0.35) !important; /* sage-50/35 */
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}

/* Ensure consistent orange highlight when a card is hovered via point hover */
.condition-info.hovered {
  border-left-color: rgba(234, 88, 12, 0.6) !important; /* orange-500/60 */
  background-color: rgba(247, 249, 245, 0.35) !important; /* sage-50/35 */
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}
