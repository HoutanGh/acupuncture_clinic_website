/* =====================================================================
   Site styles (Tailwind complement)
   - Light, targeted rules that sit alongside Tailwind utilities
   - Comments written in UK English; no visual formatting changes made
===================================================================== */

/* =====================================================================
   0.  Global tweaks that Tailwind Preflight does not cover
===================================================================== */

/* Global sanity and reset (complements Tailwind Preflight) */
html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }
body { margin: 0; }
img, video, canvas { max-width: 100%; height: auto; display: block; }
svg { max-width: 100%; height: auto; }

/* Optional temporary guard whilst auditing overflow (keep disabled by default) */
/* html, body { overflow-x: clip; } */

/* Global typeface override — exclude Font Awesome icons */
body, 
body *:not([class*="fa-"]):not(.fa):not(.fas):not(.far):not(.fal):not(.fab) {
  font-family: 'Aptos', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif !important;
}

/* Ensure Font Awesome icons use their correct typeface */
.fa, .fas, .far, .fal, .fab, [class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 6 Pro", "Font Awesome 6 Brands" !important;
}

/* Generic card‑style sections */
section {
  /* Anchor offset handled via Tailwind scroll-pt utilities */
  position: relative;
  /* Inter-section spacing is controlled in HTML via Tailwind mt-* */
  border: 2px solid transparent;
  transition: all 0.3s;
  /* Force square corners for all sections */
  border-radius: 0 !important;
}

/* Removed outline suppression on sections to allow Tailwind focus styles */


/* Underline flourish for navigation links */
.nav-link {
  position: relative;
  padding-bottom: 0.125rem;   /* 2px */
}
.nav-link::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: 0;
  width: 0;
  height: 2px;
  background: #c97a53;
  transform: translateX(-50%);
  transition: width 0.3s ease-out;
}
.nav-link:hover::after,
.nav-link:focus::after { width: 100%; }

/* Sage palette provided via Tailwind config (see index.html) */
/* CSS fallbacks to ensure backgrounds always render */
.bg-sage-50  { background-color: #f7f9f5; }

/* Section background fallbacks (in case Tailwind classes are unavailable) */
#about-acupuncture,
#conditions,
#prices { background-color: #f7f9f5; }

/* Deliberately minimal: header/top-bar tweaks live in index.html Tailwind classes. */

/* =====================================================================
   1.  Enhanced form styling — minimal and calm
===================================================================== */

/* Glass‑morphism effect for the form container */
.glass-morphism {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* Form input styling with underline effect */
.form-input {
  outline: none;
  position: relative;
}

.form-input::placeholder {
  transition: all 0.3s ease;
}

.form-input:focus::placeholder {
  opacity: 0.6;
  transform: translateY(-2px);
}

/* Tailwind controls hover/focus border colours for inputs */

/* Form group wrapper (for state/animation hooks) */
.form-group {
  position: relative;
}

/* Hover borders handled via Tailwind utilities */

/* Submit button enhancements */
.submit-btn {
  position: relative;
  overflow: hidden;
  letter-spacing: 0.5px;
}

.submit-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.6s ease;
}

.submit-btn:hover::before {
  left: 100%;
}

.submit-btn:hover .submit-icon {
  transform: translateX(2px);
}

/* Loading state for the submit button */
.submit-btn.loading {
  cursor: not-allowed;
  opacity: 0.7;
}

.submit-btn.loading .submit-text {
  opacity: 0;
}

.submit-btn.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid transparent;
  border-top: 2px solid #ffffff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.form-input.success {
  border-bottom-color: #10b981 !important;
}

/* Smooth transitions for all form elements */
.form-input,
.submit-btn {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* =====================================================================
   2.  Welcome section background (Jay Castor image)
===================================================================== */

#home {
  background-image: linear-gradient(rgba(247, 249, 245, 0.85), rgba(255, 255, 255, 0.75), rgba(236, 243, 226, 0.85)), url('images/jay-castor-7AcMUSYRZpU-unsplash.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

/* Ensure content is correctly layered */
#home > .relative {
  position: relative;
  z-index: 2;
}

/* Add a subtle overlay for improved text contrast */
#home::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.1);
  z-index: 1;
  border-radius: inherit;
}


/* =====================================================================
  2a. Welcome section — mobile refinements
   - Tighter spacing, smaller type, smoother background on phones
===================================================================== */

@media (max-width: 639px) {
  /* Reduce heavy vertical rhythm and side padding */
  #home > .relative {
    padding: 1.5rem 1rem !important; /* was px-6 py-16 */
  }

  /* Avoid fixed backgrounds on mobile for smoother scrolling */
  #home { background-attachment: scroll; }

  /* Headline scaling for small screens */
  #home h1 {
    font-size: clamp(1.75rem, 6vw, 2rem);
    line-height: 1.2;
  }
  /* Secondary lines in the headline stack a touch smaller */
  #home h1 .block {
    font-size: clamp(1.25rem, 5.2vw, 1.5rem);
    line-height: 1.25;
  }

  /* Intro paragraph readability */
  #home p {
    font-size: 1rem; /* ~text-base */
    line-height: 1.6;
    margin-top: 0.25rem;
  }

  /* The contact column has px-16 on mobile — soften it */
  #home .relative > div:last-child {
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
  }

  /* Form card breathing room */
  #home #contact {
    padding: 1rem !important; /* was p-8 */
    border-radius: 0.875rem; /* ~rounded-xl but a bit tighter */
  }

  /* Button size harmony */
  #home .submit-btn {
    height: 3.25rem !important; /* a little shorter */
    font-size: 0.95rem;
  }

  /* Tighten vertical rhythm for space-y utilities inside #home */
  #home .space-y-8 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem !important; }
  #home .space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.75rem !important; }

  /* Name grid now handled with Tailwind responsive utilities in HTML */

  /* Ensure the overlay covers right up to the border on mobile */
  #home::before { inset: -2px; }
}


/* =====================================================================
   3.  Timeline tweaks (About Acupuncture → Tradition)
   - Horizontal on mobile, compact spacing
   - Tooltips open on tap (mobile) or hover (desktop)
===================================================================== */

/* Show the tooltip when a timeline item is opened programmatically */
.timeline-item.open .timeline-tooltip { 
  opacity: 1 !important; 
  pointer-events: auto !important; 
}

/* Small nudge to reduce spacing under the time label on desktop */
@media (min-width: 768px) {
  .timeline-item p { margin-top: 0.25rem !important; }
}

/* Allow timeline tooltips to overflow the card area */
#about-panel { overflow: visible; }

/* Mobile refinements: avoid clipping at edges and bring end items inward */
@media (max-width: 767px) {
  

  /* Nudge edge tooltips outward slightly (still visible due to overflow) */
  #about-acupuncture .timeline-item:first-child .timeline-tooltip {
    transform: translateX(-32.5%);
  }
  #about-acupuncture .timeline-item:last-child .timeline-tooltip {
    transform: translateX(-67.5%);
  }
}



/* =====================================================================
   4.  Treated conditions (mobile overlay)
   - Hide cards on mobile; show diagram‑only
   - Show translucent overlay on point hover/tap
===================================================================== */

/* Hide the list of condition cards on small and medium screens */
@media (max-width: 1023px) {
  .conditions-list { display: none !important; }
  .condition-info { display: none !important; }
}


/* =====================================================================
  5.  Prices section (mobile horizontal cards)
   - Make cards adjacent horizontally with a smaller footprint
===================================================================== */

@media (max-width: 639px) {
  #prices .prices-cards {
    display: flex !important;
    gap: 0.5rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    padding-bottom: 0.25rem;
  }
  #prices .prices-cards > div {
    flex: 0 0 220px; /* slightly smaller cards to fit */
    padding: 0.875rem !important;
    border-radius: 0.75rem;
    scroll-snap-align: start;
    transform: none !important; /* disable hover scale on mobile */
  }
  #prices .prices-cards > div:hover {
    transform: none !important;
  }
  /* Icon sizing now handled with Tailwind responsive utilities in HTML */
}

/* Overlay container injected in the figure */
.condition-overlay {
  position: absolute;
  width: 300px;
  max-width: calc(100% - 24px);
  z-index: 30;
  background: rgba(255, 255, 255, 0.82); /* more translucent */
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(0,0,0,0.06);
  border-radius: 0.75rem; /* ~rounded-xl */
  box-shadow: 0 10px 25px rgba(0,0,0,0.12);
  padding: 0.75rem 0.875rem;
  opacity: 0;
  transform: translate(-50%, -8px);
  transition: opacity 100ms ease, transform 100ms ease;
  pointer-events: none; /* allow clicks to pass through */
}

.condition-overlay.visible {
  opacity: 1;
  transform: translate(-50%, 0);
  /* Keep pointer-events none so points can be clicked through */
}

/* =====================================================================
   6.  Utilities
   - Hide scrollbars for horizontal carousels on mobile
===================================================================== */

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Safari and Chrome */
}

.condition-overlay .title {
  font-weight: 600;
  color: #6b7f57; /* text-sage-700 */
  margin-bottom: 0.25rem;
}

.condition-overlay .desc {
  font-size: 0.9rem;
  line-height: 1.4;
  color: #374151; /* gray-700 */
}

/* =====================================================================
   6a. Conditions active highlight (points + cards)
===================================================================== */

.condition-point {
  transition: transform 160ms ease, box-shadow 160ms ease, background-color 160ms ease;
}

.condition-point.active {
  transform: translate(-50%, -50%) scale(1.15);
  background-color: rgba(20, 184, 166, 0.7); /* teal-500 stronger */
  box-shadow: 0 0 0 6px rgba(201, 122, 83, 0.28), 0 0 0 12px rgba(201, 122, 83, 0.14), 0 8px 18px rgba(0,0,0,0.25);
}

.condition-info.active {
  border-left-color: rgba(234, 88, 12, 0.6) !important; /* orange-500/60 */
  background-color: rgba(247, 249, 245, 0.35) !important; /* sage-50/35 */
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}

/* Ensure a consistent orange highlight when a card is hovered via point hover */
.condition-info.hovered {
  border-left-color: rgba(234, 88, 12, 0.6) !important; /* orange-500/60 */
  background-color: rgba(247, 249, 245, 0.35) !important; /* sage-50/35 */
  box-shadow: 0 10px 22px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}

/* =====================================================================
   7.  Night mode (soft dark theme)
   - Activated by adding class `night` to <html>
   - Muted contrast; darker variants of sage/teal/orange
===================================================================== */

/* Base surfaces and text */
.night body {
  background: linear-gradient(#121613, #171d19) !important;
  color: #d7ddd6;
}

/* Top bars and header overlays */
.night header { background-color: #171c19 !important; }
.night header .absolute.inset-0 { background: rgba(23,28,25,0.85) !important; }
.night .bg-gray-100 { background-color: #171c19 !important; }

/* Common surfaces */
.night .bg-white { background-color: #1a1f1c !important; }
.night .bg-white\/80 { background-color: rgba(26, 31, 28, 0.9) !important; }
.night .bg-white\/95 { background-color: rgba(26, 31, 28, 0.92) !important; }
.night .bg-gray-50 { background-color: #191e1b !important; }
.night .bg-sage-50 { background-color: #0f1311 !important; }
.night .bg-teal-50 { background-color: #101512 !important; }
.night footer { background-color: #151a17 !important; }

/* Card/drawer panels */
.night #about-panel { background-color: #171c19 !important; border-color: #2a2f2b !important; }
.night #about-acupuncture { background-color: #0f1311 !important; border-color: #29332b !important; }

/* Borders */
.night .border-gray-200 { border-color: #2a2f2b !important; }
.night .border-gray-300 { border-color: #37423b !important; }
.night .border-white\/20 { border-color: rgba(255,255,255,0.15) !important; }
.night .border-amber-200 { border-color: #4a3e1f !important; }
.night .border-orange-400 { border-color: #6b4525 !important; }
.night .border-orange-500\/60 { border-color: #6b4525 !important; }
.night .border-orange-500\/40 { border-color: #5a3a21 !important; }

/* Subtle backgrounds and accents */
.night .bg-gray-200 { background-color: #242a27 !important; }
.night .bg-amber-50 { background-color: #2a2416 !important; }

/* Text colours — keep contrast moderate, not stark */
.night .text-gray-900 { color: #e7ece7 !important; }
.night .text-gray-800 { color: #dbe2dc !important; }
.night .text-gray-700 { color: #c7cfc8 !important; }
.night .text-gray-600 { color: #b4beb6 !important; }
.night .text-gray-500 { color: #a0a9a2 !important; }
.night .text-gray-400 { color: #8d948e !important; }
.night .text-sage-700 { color: #b4c2ad !important; }
.night .text-amber-900 { color: #d6c492 !important; }
.night .text-amber-700 { color: #c9b371 !important; }
.night .text-teal-600 { color: #75c6bd !important; }
.night .text-teal-700 { color: #8fd1c8 !important; }
.night .hover\:text-teal-600:hover { color: #8ed2ca !important; }

/* Ring colour tweaks for softer accents */
.night .ring-orange-100 { --tw-ring-color: #5a3a21 !important; }

/* Hero background darkening */
.night #home {
  background-image: linear-gradient(rgba(18,22,19,0.9), rgba(18,22,19,0.88), rgba(18,22,19,0.9)), url('images/jay-castor-7AcMUSYRZpU-unsplash.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}
.night #home::before { background: rgba(0,0,0,0.18); }

/* Gradients on cards: simplify to solid surface in night mode */
.night .bg-gradient-to-br { background-image: none !important; }

/* =====================================================================
   7a. Section hero headers — ensure transparent text backgrounds
   - Prevent any default background on header text wrappers
   - Keeps hero text blending with the section background colour
===================================================================== */

#about-acupuncture header,
#about-acupuncture header *,
#conditions header,
#conditions header * {
  background-color: transparent !important;
}
